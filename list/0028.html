<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no">
    <title>Wi-Fi Speed Test</title>
    <style>
        * {
            box-sizing: border-box;
            touch-action: manipulation;
            user-select: none;
            -webkit-user-select: none;
        }
        body, html {
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #f5f5f5;
            font-family: Arial, sans-serif;
        }
        .meter-container {
            text-align: center;
            padding: 20px;
            background-color: #ffffff;
            box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            width: 300px;
        }
        .speed {
            font-size: 2rem;
            color: #4CAF50;
            margin-bottom: 20px;
        }
        .status {
            margin-top: 10px;
            font-size: 1rem;
        }
        .control-button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 1rem;
            color: #ffffff;
            background-color: #007BFF;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .control-button:active {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <div class="meter-container">
        <div class="speed">0 Mbps</div>
        <div class="status">Click "Start" to test Wi-Fi speed</div>
        <button class="control-button" onclick="startSpeedTest()">Start</button>
    </div>

    <script>
        const speedEl = document.querySelector('.speed');
        const statusEl = document.querySelector('.status');

        function startSpeedTest() {
            const testFileUrl = 'https://speed.hetzner.de/100MB.bin'; // Test file URL
            const fileSizeInBits = 100 * 8 * 1024 * 1024; // 100 MB in bits
            const startTime = Date.now();

            statusEl.textContent = 'Testing...';

            fetch(testFileUrl)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.blob();
                })
                .then(() => {
                    const endTime = Date.now();
                    const durationInSeconds = (endTime - startTime) / 1000;
                    const speedMbps = (fileSizeInBits / durationInSeconds) / (1024 * 1024);

                    speedEl.textContent = `${speedMbps.toFixed(2)} Mbps`;
                    statusEl.textContent = 'Test completed';
                })
                .catch(error => {
                    console.error('Error during speed test:', error);
                    statusEl.textContent = 'Test failed';
                });
        }
    </script>
</body>
</html>
